author: Jeffrey Wilkinson (BJ)
core-version: >=5.0.13
created: 20140830073105161
dependents: 
description: editor of json!
plugin-type: plugin
source: https://github.com/buggyj/TW5-jsoneditor
title: $:/plugins/bj/jsoneditor
type: application/json
version: 0.0.5

{
    "tiddlers": {
        "$:/config/EditorTypeMappings/application/json": {
            "title": "$:/config/EditorTypeMappings/application/json",
            "text": "json"
        },
        "$:/plugins/bj/jsoneditor/edit-json.js": {
            "text": "/*\\\ntitle: $:/plugins/bj/jsoneditor/edit-json.js\ntype: application/javascript\nmodule-type: widget\n\njsoneditor adaptor\n\n\\*/\n(function(){\n\n/*jslint node: true, browser: true */\n/*global $tw: false */\n\"use strict\";\n\nvar MIN_TEXT_AREA_HEIGHT = 100; // Minimum height of textareas in pixels\n\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\nvar newid=0;\nvar EditJsonWidget = function(parseTreeNode,options) {\n\tthis.initialise(parseTreeNode,options);\n};\nif($tw.browser) {\n\trequire(\"$:/plugins/bj/jsoneditor/JSONeditor.js\");\n}\n/*\nInherit from the base widget class\n*/\nEditJsonWidget.prototype = new Widget();\n\n/*\nRender this widget into the DOM\n*/\nEditJsonWidget.prototype.render = function(parent,nextSibling) {\n\tvar self = this;\n\t// Save the parent dom node\n\tthis.parentDomNode = parent;\n\t// Compute our attributes\n\tthis.computeAttributes();\n\t// Execute our logic\n\tthis.execute();\n\t// Create our element\n\tvar editInfo = this.getEditInfo();\n\tvar domNode = this.document.createElement(\"div\");\n\tvar domNode2 = this.document.createElement(\"div\");\n\tif(this.editType) {\n\t\tdomNode.setAttribute(\"type\",this.editType);\n\t}\n\tif(editInfo.value === \"\" && this.editPlaceholder) {\n\t\tdomNode.setAttribute(\"placeholder\",this.editPlaceholder);\n\t}\n\t// Assign classes\n\tif(this.editClass) {\n\t\tdomNode.className = this.editClass;\n\t}\n\tvar domNode2 = this.document.createElement(\"div\");\n\tdomNode.innerHTML = '<div style=\"font-size: 11px; font-family: Verdana,Arial,Helvetica,sans-serif;\" id=\"jsoneditortree'+newid+'\"></div>';\n\tdomNode2.innerHTML \t=\tthis.formHTML;\n\t\n\t// Add an input event handler\n\t//$tw.utils.addEventListeners(domNode2,[\n\t//\t{name: \"focus\", handlerObject: this, handlerMethod: \"handleFocusEvent\"},\n\t//\t{name: \"input\", handlerObject: this, handlerMethod: \"handleInputEvent\"}\n\t//]);\n\n\t// Insert the element into the DOM\n\tparent.insertBefore(domNode2,nextSibling);\n\tparent.insertBefore(domNode,domNode2);\n\tvar updater =function(x){\n\t\tself.saveChanges(x);\n\t}\n\tthis.instance=JSONeditor.start('jsoneditortree'+newid,domNode2.firstChild.firstChild,JSON.parse(editInfo.value),\n\t\t\t\t\t\t\t\t\t'$:/plugins/bj/jsoneditor/',this.format,updater);\n\tvar instance = this.instance;\n\n\tnewid++;\n\tthis.domNodes.push(domNode);\n\tthis.domNodes.push(domNode2);\n\tif(this.postRender) {\n\t\tthis.postRender();\n\t}\n\tthis.formsetup(domNode2.firstChild);\n};\n\nEditJsonWidget.prototype.formHTML=\t\n\t'<div style=\"font-size: 11px; font-family: Verdana,Arial,Helvetica,sans-serif;\" \">'+\n\t\"<form name=\\\"jsoninput\\\" >\"\t+\n\t\"\\nLabel:<br>\"+\n\t\"<input name=\\\"jlabel\\\" type=\\\"text\\\" value=\\\"\\\" size=\\\"60\\\" style=\\\"width:400px\\\">\"+\n\t\"<br><br>\\nValue: <br>\"+\n\t\"<textarea name=\\\"jvalue\\\" rows=\\\"10\\\" cols=\\\"50\\\" style=\\\"width:400px\\\"></textarea>\"+\n\t\"<br><br>\\nData type: \"+\n\t\"<select  name=\\\"jtype\\\">\"+\n\t\"\\n<option value=\\\"object\\\">object</option>\\n<option value=\\\"array\\\">array</option>\"+\n\t\"\\n<option value=\\\"string\\\">string</option>\"+\n\t\"\\n<option value=\\\"number\\\">number</option>\\n<option value=\\\"boolean\\\">boolean</option>\"+\n\t\"\\n<option value=\\\"null\\\">null</option>\\n<option value=\\\"undefined\\\">undefined</option>\"+\n\t\"\\n</select>&nbsp;&nbsp;&nbsp;&nbsp;\"+\n\t\"\\n<input name=\\\"orgjlabel\\\" type=\\\"hidden\\\" value=\\\"\\\" size=\\\"50\\\" style=\\\"width:300px\\\">\"+\n\t\"\\n<input name=\\\"jsonUpdate\\\" onfocus=\\\"this.blur()\\\" type=\\\"submit\\\" value=\\\"Set value\\\">&nbsp;\\n<br><br>\"+\n\t\"\\n<input name=\\\"jsonAddChild\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\"  value=\\\"Add child\\\">\"+\n\t\"\\n<input name=\\\"jsonAddSibling\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\"  value=\\\"Add sibling\\\">\\n<br><br>\"+\n\t\"\\n<input name=\\\"jsonRemove\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\"  value=\\\"Delete\\\">&nbsp;\"+\n\t\"\\n<input name=\\\"jsonRename\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\"  value=\\\"Rename\\\">&nbsp;\"+\n\t\"\\n<input name=\\\"jsonCut\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\" value=\\\"Cut\\\">&nbsp;\"+\n\t\"\\n<input name=\\\"jsonCopy\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\"  value=\\\"Copy\\\">&nbsp;\"+\n\t\"\\n<input name=\\\"jsonPaste\\\" onfocus=\\\"this.blur()\\\" type=\\\"button\\\" value=\\\"Paste\\\">&nbsp;\\n<br><br>\"+\n\t\"\\n<input type=\\\"checkbox\\\" name=\\\"jbefore\\\">Add children first/siblings before\\n<br>\"+\n\t\"\\n<input type=\\\"checkbox\\\" name=\\\"jPasteAsChild\\\">Paste as child on objects & arrays\\n<br><br><div id=\\\"jformMessage\\\"></div>\\n</form></div>\";\n\t\t\t\t\nEditJsonWidget.prototype.formsetup = function(f) {\n\tvar instance = this.instance\n\tvar fs=f.style\n\tfs.fontSize=fs.fontSize=\"11px\"\n\tfs.fontFamily=fs.fontFamily=\"Verdana,Arial,Helvetica,sans-serif\"\n\tvar e=f.getElementsByTagName(\"*\");\n\tfor(var i=0;i<e.length;i++){\n\t\tvar s=e[i].style\n\t\tif(!!s){\n\t\t\ts.fontSize=\"11px\"\n\t\t\ts.fontFamily=\"Verdana,Arial,Helvetica,sans-serif\"\n\t\t}\n\t\tvar cb= e[i].name\n\t\tif (!!cb ) switch (cb) {\n\t\t\tcase 'jsoninput': if (this.onkeyupdate!==\"yes\") e[i].addEventListener(\"submit\", function (e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tinstance.jsonChange(e.target);\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\tbreak;\n\t\t\tcase 'jlabel': if (this.onkeyupdate===\"yes\") e[i].addEventListener(\"input\", function (e) {\n\t\t\t\t//e.preventDefault();\n\t\t\t\tinstance.jsonChange(e.target.parentNode);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jvalue': if (this.onkeyupdate===\"yes\") e[i].addEventListener(\"input\", function (e) {\n\t\t\t\t//e.preventDefault();\n\t\t\t\tinstance.jsonChange(e.target.parentNode);\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonUpdate': if (this.onkeyupdate===\"yes\") e[i].style.display = 'none';\n\t\t\tbreak;\n\t\t\tcase 'jtype': e[i].addEventListener(\"change\", function (e) {\n\t\t\t\tinstance.changeJsonDataType(e.target.value,e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonAddChild':e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonAddChild(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonAddSibling': e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonAddSibling(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonRemove': e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonRemove(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonRename': e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonRename(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonCut': e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonCut(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonCopy':e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonCopy(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tcase 'jsonPaste': e[i].addEventListener(\"click\", function (e) {\n\t\t\t\tinstance.jsonPaste(e.target.parentNode);\n\t\t\t});\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t}\n\t}\n}\n/*\nGet the tiddler being edited and current value\n*/\nEditJsonWidget.prototype.getEditInfo = function() {\n\t// Get the edit value\n\tvar self = this,\n\t\tvalue,\n\t\tupdate;\n\tif(this.editIndex) {\n\t\tvalue = this.wiki.extractTiddlerDataItem(this.editTitle,this.editIndex,this.editDefault);\n\t\tupdate = function(value) {\n\t\t\tvar data = self.wiki.getTiddlerData(self.editTitle,{});\n\t\t\tif(data[self.editIndex] !== value) {\n\t\t\t\tdata[self.editIndex] = value;\n\t\t\t\tself.wiki.setTiddlerData(self.editTitle,data);\n\t\t\t}\n\t\t};\n\t} else {\n\t\t// Get the current tiddler and the field name\n\t\tvar tiddler = this.wiki.getTiddler(this.editTitle);\n\t\tif(tiddler) {\n\t\t\t// If we've got a tiddler, the value to display is the field string value\n\t\t\tvalue = tiddler.getFieldString(this.editField);\n\t\t} else {\n\t\t\t// Otherwise, we need to construct a default value for the editor\n\t\t\tvalue = '{}';\n\t\t}\n\n\t\tupdate = function(value) {\n\t\t\tvar tiddler = self.wiki.getTiddler(self.editTitle),\n\t\t\t\tupdateFields = {\n\t\t\t\t\ttitle: self.editTitle\n\t\t\t\t};\n\t\t\tupdateFields[self.editField] = value;\n\t\t\tself.wiki.addTiddler(new $tw.Tiddler(self.wiki.getCreationFields(),tiddler,updateFields,self.wiki.getModificationFields()));\n\t\t};\n\t}\n\treturn {value: value, update: update};\n};\n\n/*\nCompute the internal state of the widget\n*/\nEditJsonWidget.prototype.execute = function() {\n\t// Get our parameters\n\tthis.editTitle = this.getAttribute(\"tiddler\",this.getVariable(\"currentTiddler\"));\n\tthis.editField = this.getAttribute(\"field\",\"text\");\n\tthis.editIndex = this.getAttribute(\"index\");\n\tthis.editClass = this.getAttribute(\"class\");\n\tthis.editPlaceholder = this.getAttribute(\"placeholder\");\n\tthis.editFocusPopup = this.getAttribute(\"focusPopup\");\n\tthis.onkeyupdate = this.getAttribute(\"onkeyupdate\",\"yes\"); \n\t// Get the editor element tag and type\n\tvar tag,type;\n\tif(this.editField === \"text\") {\n\t\ttag = \"textarea\";\n\t} else {\n\t\ttag = \"input\";\n\t\tvar fieldModule = $tw.Tiddler.fieldModules[this.editField];\n\t\tif(fieldModule && fieldModule.editTag) {\n\t\t\ttag = fieldModule.editTag;\n\t\t}\n\t\tif(fieldModule && fieldModule.editType) {\n\t\t\ttype = fieldModule.editType;\n\t\t}\n\t\ttype = type || \"text\";\n\t}\n\t// Get the rest of our parameters\n\tthis.editTag = this.getAttribute(\"tag\",tag);\n\tthis.editType = this.getAttribute(\"type\",type);\n\ttry {\n\t var data=$tw.wiki.getTiddlerData(\"$:/plugins/bj/jsoneditor/options.json\");\n\t this.onkeyupdate=(data['onkeyupdate'])?data['onkeyupdate']:'yes';\n\t this.format=(data['format'])?data['format']:'';\n\t} catch(e){ \n\t\talert(\"invalid style format\");\n\t\tthis.onkeyupdate=\"yes\";\n\t\tthis.format='';\n\t}\n};\n\n/*\nSelectively refreshes the widget if needed. Returns true if the widget or any of its children needed re-rendering\n*/\nEditJsonWidget.prototype.refresh = function(changedTiddlers) {\n\tvar changedAttributes = this.computeAttributes();\n\t// Completely rerender if any of our attributes have changed\n\tif(changedAttributes.tiddler || changedAttributes.field || changedAttributes.index) {\n\t\tthis.refreshSelf();\n\t\treturn true;\n\t} else if(changedTiddlers[this.editTitle]) {\n\t\t//this.refreshSelf();//BJ FIXME saving cause the widget to get redrawn\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n\n/*\nHandle a dom \"input\" event\n*/\nEditJsonWidget.prototype.handleInputEvent = function(event) {\n\tthis.saveChanges(JSON.stringify(this.json));\n\treturn true;\n};\n\nEditJsonWidget.prototype.handleFocusEvent = function(event) {\n\tif(this.editFocusPopup) {\n\t\t$tw.popup.triggerPopup({\n\t\t\tdomNode: this.domNodes[0],\n\t\t\ttitle: this.editFocusPopup,\n\t\t\twiki: this.wiki,\n\t\t\tforce: true\n\t\t});\n\t}\n\treturn true;\n};\n\nEditJsonWidget.prototype.saveChanges = function(text) {\n\tvar editInfo = this.getEditInfo();\n\tif(text !== editInfo.value) {\n\t\teditInfo.update(text);\n\t}\n};\n\nexports[\"edit-json\"] = EditJsonWidget;\n\n})();\n",
            "title": "$:/plugins/bj/jsoneditor/edit-json.js",
            "type": "application/javascript",
            "module-type": "widget"
        },
        "$:/plugins/bj/jsoneditor/docNode.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/docNode.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///yH5BAEAAA8AIf4cVWxlYWQgR0lGIFNtYXJ0U2F2ZXIgVmVyIDIuMAAsAAAAABAAFgBABCDwyUmrvTjrzbv/YChywFd6Z5eST+m217rJGp3ZGB5jEQA7"
        },
        "$:/plugins/bj/jsoneditor/folderNodeLastFirst.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeLastFirst.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWAPcLAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAsALAAAAAAQABYAAAhFABcIHEiwoMGDCBMqXMiwIICHECEeBDCxosB/Ayka1LgAo0COBCn+GzlyAcWTGQd6NGmxY8qNLUNGjNiwps2bOHPq3BkQADs="
        },
        "$:/plugins/bj/jsoneditor/folderNodeLast.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeLast.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///yH5BAEAAAEALAAAAAAQABYAAAQvMMhJq5Xg6n0z/xUgjmNnWl4gTCmVrpgpzHOQ3ewE26eaoz0XiQQqGo/IpHKpiQAAOw=="
        },
        "$:/plugins/bj/jsoneditor/doc.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/doc.gif",
            "module-type": "library",
            "text": "R0lGODlhGAAWAPcAAP39/vf//+f3/+fv9+fv7+fn597v/9bv/9bn98zs/87n/8bn/97n78be/87W/73e/7XW/63W/6XW/73O/63O97XG562197W956W13qWt1pyl1oSl3oSczoyUvWb//2bM/2ut50Kl93uUxnuEzkKM1jOZ/3OEvTMzzGtzpWZmmTMAmWNjYwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///ywAAAAAGAAWAEAIxgD/CRxIsKDBghsAqDjB8ICKhwoqrDhI0ASChyooUIjAUcKFiRQFJgQAIEBJABtAgAwpkEMBjDAzTljJsqbNmywTqvCQIMUBBA4cWLBA8+CGADExPphZcwSDpBAoTKBQ9OCKq1izXsXJ1eCGr2DBVqWYsITZEgEGhAhBYixChR8+pCggwIABBR9rHh0w4OeBnwoaSNRLwC6CAw0CL6AwmKUIBocRLEgMISrVmiYYKFAwmUJlCh7dDkSBIYOG06hPdxDdtTXXgAA7"
        },
        "$:/plugins/bj/jsoneditor/docNodeLastFirst.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/docNodeLastFirst.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///yH5BAEAAA8ALAAAAAAQABYAQAQY8MlJq7046827/2AojmQJAg+qpmbrvlIEADs="
        },
        "$:/plugins/bj/jsoneditor/folderNodeOpen.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeOpen.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDAwAAAAAAAAAAAAP///yH5BAEAAAsALAAAAAAQABYAAAQucMlJq5Xg6n0z/xUgjmNnWl54qugivO+SzVNK2fV66zVJgkBMcCgkBnHGDVISAQA7"
        },
        "$:/plugins/bj/jsoneditor/folderNodeOpenLastFirst.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeOpenLastFirst.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWAPcLAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAsALAAAAAAQABYAAAg8ABcIHEiwoMGDCBMqXMiwIICHECEeBDCxokGKFy06XPCvY8cFFEMOxLgxo8mSKAlGXNmwpcuXMGPKnBkQADs="
        },
        "$:/plugins/bj/jsoneditor/docNodeLast.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/docNodeLast.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///yH5BAEAAA8AIf4cVWxlYWQgR0lGIFNtYXJ0U2F2ZXIgVmVyIDIuMAAsAAAAABAAFgBABBvwyUmrvTjrzbv/YChywFd6Z5eST+m2YyzPXgQAOw=="
        },
        "$:/plugins/bj/jsoneditor/folderNode.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNode.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDAwAAAAAAAAAAAAP///yH5BAEAAAsALAAAAAAQABYAAAQycMlJq5Xg6n0z/xUgjmNnWt4iTCmVrpgpzPOS3ewE26eaoz0XiQQqxoxIXtLYWnKakwgAOw=="
        },
        "$:/plugins/bj/jsoneditor/folder.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folder.gif",
            "module-type": "library",
            "text": "R0lGODlhGAAWAPcAAAAAAP//mf/3kf/0jv/rhf/mgP/gev/UbplmAJpnAZxpA55rBaBtB6NwCqVyDKh1D6t4Eq57FbB9F7OAGrSBG7WCHLeEHriFH7qHIbyJI72KJL+MJsCNJ8KPKcWSLMeULsmWMMuYMsyZM9OgOtypQ+azTe+8VvjFX//MZv///2ZmZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAGAAWAEAIswBTCBxIsKDBgSAIFPDAsCGHDBcoTJhwkKCKixgzYqw4UEQIEB84cuSAwkMAAihToiwRQIEKkTBjyhQpIkWAmwFSaMBgocIECTA9HBCBs+jNEwEYvDyIAcWFAAeiSo06IgCCpTOzat26tebADltDCBhAlmzBCFgPfjDggWOBFA3SEuyAIkQAAXjz4jURYIHcgRpQbAhgoLDhwiQCJPg70KeECBAeOGjAYIGCBFcZc93MWWtAADs="
        },
        "$:/plugins/bj/jsoneditor/vertLine.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/vertLine.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///yH5BAEAAA8AIf4cVWxlYWQgR0lGIFNtYXJ0U2F2ZXIgVmVyIDIuMAAsAAAAABAAFgBABBnwyUmrvTjrzbv/YChywFd6Z5eSZou6KlxFADs="
        },
        "$:/plugins/bj/jsoneditor/JSONeditor.js": {
            "type": "application/javascript",
            "title": "$:/plugins/bj/jsoneditor/JSONeditor.js",
            "module-type": "library",
            "text": "/*\njsonEditor 1.02\ncopyright 2007-2009 Thomas Frank\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\nJSONeditor={\n\tstart:function(treeDivName,formDivName,json,imagepath,format,updater){\n\n\t\treturn new this.treeBuilder(treeDivName,formDivName,json,imagepath,format,updater)\n\t}\n}\n\n/*\ntreeBuilder v 1.00 + a lot of json stuff added...\ncopyright 2007 Thomas Frank\n*/\nJSONeditor.treeBuilder=function(treeDivName,f,json,imagepath,format,updater){\n\tvar self = this,$=this.$\n\tvar s=$(treeDivName).style\n\t\n\tjson=json||{}\n\t\n\tthis.form = f\n\tthis.forSaving=function(){\n\t\t//updating can be done externally, so this function may be null\n\t\tif(!!updater) updater(this.JSONstring(this.json,null,this.format));\n\t}\n\tthis.stateMem={}\n\tthis.images={\n\t\tfolderNode:'',\n\t\tfolderNodeOpen:'',\n\t\tfolderNodeLast:'',\n\t\tfolderNodeOpenLast:'',\n\t\tdocNode:'',\n\t\tdocNodeLast:'',\n\t\tfolder:'',\n\t\tfolderOpen:'',\n\t\tdoc:'',\n\t\tvertLine:'',\n\t\tfolderNodeFirst:'',\n\t\tfolderNodeOpenFirst:'',\n\t\tfolderNodeLastFirst:'',\n\t\tfolderNodeOpenLastFirst:'',\n\t\tpath:imagepath,\n\t\tnodeWidth:16\n\t}\n\tthis.format = format;\n\tthis.JSONbuild(treeDivName,json)//sets up the instance \n}\n\n\tJSONeditor.treeBuilder.prototype.$=function(x){return document.getElementById(x)}\n\tJSONeditor.treeBuilder.prototype.preParse=function(x){\n\t\tvar x=x.innerHTML.split(\"\\n\");\n\t\tvar d=[];\n\t\tfor(var i=0;i<x.length;i++){\n\t\t\tif(x[i]){\n\t\t\t\tvar y=x[i].split(\"\\t\");\n\t\t\t\tvar l=0;while(!y[l]){l++};\n\t\t\t\tvar la=y[l]?y[l]:'';l++;\n\t\t\t\tvar t=y[l]?y[l]:'';\n\t\t\t\td.push({level:l,label:la,todo:t});\n\t\t\t}\n\t\t};\n\t\treturn d\n\t}\n\tJSONeditor.treeBuilder.prototype.isArray=function(x){\n\t\treturn x.constructor==Array\n\t}\n\tJSONeditor.treeBuilder.prototype.jSyncTree=function(x){\n\t\tvar d=this.$(this.baseDiv).getElementsByTagName('div')\n\t\tfor(var i=0;i<d.length;i++){\n\t\t\t\n\t\t\tthis.maniClick=\"giveItBack\"\n\t\t\tvar p=d[i].onclick()\n\t\t\tif(p==x){\n\t\t\t\tvar t=d[i]\n\t\t\t\tthis.maniClick=\"selectIt\"\n\t\t\t\tt.onclick()\n\t\t\t\tt=t.parentNode\n\t\t\t\twhile(t.id!=this.baseDiv){if(t.style){this.openAndClose(t.id,\"open\")};t=t.parentNode}\n\t\t\t}\n\t\t}\n\t\tthis.maniClick=false\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonResponder=function(x){\n\t\tthis.jTypeChanged=false\n\t\tthis.jSyncTree(x)\n\t\tvar t=this\n\t\teval(\"var a=this.\"+x)\n\t\teval(\"var ap=this.\"+this.jsonParent(x))\n\t\tvar b=t.JSONstring(a)\n\t\tvar t=(a && this.isArray(a))?\"array\":typeof a\n\t\tvar tp=(ap && this.isArray(ap))?\"array\":typeof ap\n\t\tif(a===null){t=\"null\"}\n\t\tvar f=this.form\n\t\tif(t==\"string\"){eval(\"b=\"+b)}\n\t\tf.jlabel.value=x\n\t\tf.orgjlabel.value=x\n\t\tf.jvalue.value=b\n\t\tf.jtype.value=t\n\t\tf.jlabel.disabled=f.jlabel.value==\"json\"\n\t\tf.jtype.disabled=f.jlabel.disabled\n\t\tf.jsonRemove.disabled=f.jlabel.disabled\n\t\tf.jsonAddSibling.disabled=f.jlabel.disabled\n\t\tf.jsonRename.disabled=f.jlabel.disabled || tp==\"array\"\n\t\tf.jsonAddChild.disabled=t!=\"array\" && t!=\"object\"\n\t\tf.jsonPaste.disabled=!this.jClipboard\n\t\tf.jsonCut.disabled=f.jlabel.disabled\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonParent=function(x){          \n\t\t// inmproved thanks to \\x000\n\t\tif(x==\"json\"){return \"this\"} \n\t\tif (x.charAt(x.length-1)==']') {return x.substring(0,x.lastIndexOf('['))}                  \n\t\treturn x.substring(0,x.lastIndexOf('.'))     \n\t}\t\n\tJSONeditor.treeBuilder.prototype.jsonChild=function(el1){\n\t\tvar p=this.jsonParent(el1)\n\t\tel1=el1.split(p).join(\"\")\n\t\tif(el1.charAt(0)==\".\"){el1=el1.substring(1)}\n\t\tif(el1.charAt(0)==\"[\"){el1=el1.substring(2,el1.length-2)}\n\t\treturn el1\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonRemove=function(f){\n\t\tthis.jsonChange(f,true)\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonAlreadyExists=function(o,l){\n\t\tif(o[l]!==undefined){\n\t\t\tvar co=2\n\t\t\twhile(o[l+\"_\"+co]!==undefined){co++}\n\t\t\tvar n=l+\"_\"+co\n\t\t\tvar p='\"'+l+'\" already exists in this object.\\nDo you want to rename? (otherwise the old \"'+l+'\" will be overwritten.)'\n\t\t\tp=prompt(p,n)\n\t\t\tif(p){l=p}\n\t\t}\n\t\treturn l\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonAddChild=function(f,label){\n\t\tvar first=f.jbefore.checked\n\t\tvar l=f.orgjlabel.value\n\t\teval('var o=this.'+l)\n\t\tvar t=(o && this.isArray(o))?\"array\":typeof o\n\t\tif(t==\"object\"){\n\t\t\tvar nl=label||prompt(\"Label (without path):\",\"\")\n\t\t\tif(!nl){return}\n\t\t\tif(nl/1==nl){nl=\"$\"+nl}\n\t\t\tnl=this.jsonAlreadyExists(o,nl)\n\t\t\tvar n=nl.replace(/\\w/g,'')===\"\"?l+\".\"+nl:l+'[\"'+nl+'\"]'\n\t\t\teval('this.'+n+'={}')\n\t\t\tif(first){\n\t\t\t\teval(\"var t=this.\"+l+\";this.\"+l+\"={};var s=this.\"+l)\n\t\t\t\teval('this.'+n+'={}')\n\t\t\t\tfor(var i in t){s[i]=t[i]}\t\t\t\t\n\t\t\t}\n\t\t}\n\t\tif(t==\"array\"){\n\t\t\to.push({})\n\t\t\tn=l+\"[\"+(o.length-1)+\"]\"\n\t\t\tif(first){\n\t\t\t\tfor(var i=o.length-1;i>0;i--){o[i]=o[i-1]}\n\t\t\t\to[0]={}\n\t\t\t\tn=l+\"[0]\"\n\t\t\t}\n\t\t}\n\t\tthis.JSONbuild(this.baseDiv,this.json)\n\t\tfor(var i in this.stateMem){this.openAndClose(i,true)}\n\t\tthis.jsonResponder(n)\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonAddSibling=function(f,label){\n\t\tvar before=f.jbefore.checked\n\t\tvar l=f.orgjlabel.value\n\t\tvar r=Math.random()\n\t\teval('var temp=this.'+l)\n\t\teval('this.'+l+\"=r\")\n\t\tvar s=this.JSONstring(this.json)\n\t\ts=s.split(r+\",\")\n\t\tif(s.length<2){s=s[0].split(r)}\n\t\tvar lp=this.jsonParent(l)\n\t\teval('var o=this.'+lp)\n\t\tvar t=(o && this.isArray(o))?\"array\":typeof o\n\t\tif(t==\"object\"){\n\t\t\tvar nl=label||prompt(\"Label (without path):\",\"\")\n\t\t\tif(!nl){return}\n\t\t\tif(nl/1==nl){nl=\"$\"+nl}\n\t\t\tnl=this.jsonAlreadyExists(o,nl)\n\t\t\tvar n=nl.replace(/\\w/g,'')===\"\"?\".\"+nl:'[\"'+nl+'\"]'\n\t\t\ts=s.join('null,\"'+nl+'\":{},')\n\t\t\tlp+=n\n\t\t}\n\t\tif(t==\"array\"){\n\t\t\ts=s.join('null,{},')\n\t\t\tvar k=l.split(\"[\")\n\t\t\tk[k.length-1]=(k[k.length-1].split(\"]\").join(\"\")/1+1)+\"]\"\n\t\t\tlp=k.join(\"[\")\n\t\t}\n\t\ts=s.split(\"},}\").join(\"}}\") // replace with something better soon\n\t\teval('this.json='+s)\n\t\teval('this.'+l+'=temp')\n\t\tif(before){lp=this.jsonSwitchPlace(this.jsonParent(l),l,lp)}\n\t\tthis.JSONbuild(this.baseDiv,this.json)\n\t\tfor(var i in this.stateMem){this.openAndClose(i,true)}\n\t\tthis.jsonResponder(lp)\n\t}\n\tJSONeditor.treeBuilder.prototype.jSaveFirst=function(f,a){\n\t\tvar l=f.orgjlabel.value\n\t\teval(\"var orgj=this.\"+l)\n\t\torgj=this.JSONstring(orgj)\n\t\tvar v=f.jvalue.value\n\t\tv=f.jtype.value==\"string\"?this.JSONstring(v):v\n\t\tv=v.split(\"\\r\").join(\"\")\n\t\tif(orgj!=v || f.orgjlabel.value!=f.jlabel.value || this.jTypeChanged){\n\t\t\tvar k=confirm(\"Save before \"+a+\"?\")\n\t\t\tif(k){this.jsonChange(f)}\n\t\t}\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonRename=function(f){\n\t\tthis.jSaveFirst(f,\"renaming\")\n\t\tvar orgl=l=f.orgjlabel.value\n\t\tl=this.jsonChild(l)\n\t\tvar nl=prompt(\"Label (without path):\",l)\n\t\tif(!nl){return}\n\t\tthis.jsonResponder(orgl)\n\t\tvar nl=nl.replace(/\\w/g,'')===\"\"?\".\"+nl:'[\"'+nl+'\"]'\n\t\tf.jlabel.value=this.jsonParent(orgl)+nl\n\t\tthis.jsonChange(f,false,true)\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonSwitchPlace=function(p,el1,el2){\n\t\tvar orgel1=el1, orgel2=el2\n\t\teval(\"var o=this.\"+p)\n\t\tif(this.isArray(o)){\n\t\t\teval(\"var t=this.\"+el1)\n\t\t\teval(\"this.\"+el1+\"=this.\"+el2)\n\t\t\teval(\"this.\"+el2+\"=t\")\n\t\t\treturn orgel1\n\t\t}\n\t\tel1=this.jsonChild(el1)\n\t\tel2=this.jsonChild(el2)\n\t\tvar o2={}\n\t\tfor(var i in o){\n\t\t\tif(i==el1){o2[el2]=o[el2];o2[el1]=o[el1];continue}\n\t\t\tif(i==el2){continue}\n\t\t\to2[i]=o[i]\n\t\t}\n\t\teval(\"this.\"+p+\"=o2\")\n\t\treturn orgel2\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonCut=function(f){\n\t\tthis.jSaveFirst(f,\"cutting\")\n\t\tthis.jsonCopy(f,true)\n\t\tthis.jsonChange(f,true)\n\t\tthis.setJsonMessage('Cut to clipboard!')\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonCopy=function(f,r){\n\t\tif(!r){this.jSaveFirst(f,\"copying\")}\n\t\tvar l=f.orgjlabel.value\n\t\teval(\"var v=this.\"+l)\n\t\tv=this.JSONstring(v)\n\t\tvar l=this.jsonChild(l)\n\t\tthis.jClipboard={label:l,jvalue:v}\n\t\tthis.jsonResponder(f.jlabel.value)\n\t\tif(!r){this.setJsonMessage('Copied to clipboard!')}\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonPaste=function(f,r){\n\t\tvar t=f.jtype.value\n\t\tvar sibling=t!=\"object\" && t!=\"array\"\n\t\tif(!f.jPasteAsChild.checked){sibling=true}\n\t\tif(f.orgjlabel.value==\"json\"){sibling=false}\n\t\tif(sibling){this.jsonAddSibling(f,this.jClipboard.label)}\n\t\telse {this.jsonAddChild(f,this.jClipboard.label)}\n\t\tvar l=f.orgjlabel.value\n\t\teval(\"this.\"+l+\"=\"+this.jClipboard.jvalue)\n\t\tthis.jsonResponder(l)\n\t\tthis.jsonChange(f)\n\t\tif(!r){this.setJsonMessage('Pasted!')}\n\t}\n\tJSONeditor.treeBuilder.prototype.setJsonMessage=function(x){\n\t\tself = this;\n\t\tif (!!this.forSaving)this.forSaving();\n\t\tthis.$('jformMessage').innerHTML=x\n\t\tsetTimeout(\"self.$('jformMessage').innerHTML=''\",1500)\n\t}\n\tJSONeditor.treeBuilder.prototype.changeJsonDataType=function(x,f){\n\t\tthis.jTypeChanged=true\n\t\tvar v=f.jvalue.value\n\t\tvar orgv=v;\n\t\tv=x=='object'?'{\"label\":\"'+v+'\"}':v\n\t\tv=x=='array'?'[\"'+v+'\"]':v\n\t\tif(!orgv){\n\t\t\tv=x=='object'?'{}':v\n\t\t\tv=x=='array'?'[]':v\n\t\t}\n\t\tv=x=='string'?v:v\n\t\tv=x=='number'?v/1:v\n\t\tv=x=='boolean'?!!v:v\n\t\tv=x=='null'?'null':v\n\t\tv=x=='undefined'?'undefined':v\n\t\tf.jvalue.value=v\t\t\n\t}\n\tJSONeditor.treeBuilder.prototype.jsonChange=function(f,remove,rename){\n\t\ttry {\n\t\t\tvar l=f.jlabel.value\n\t\t\tvar orgl=f.orgjlabel.value||\"json.not1r2e3a4l\"\n\t\t\teval(\"var cur=this.\"+l)\n\t\t\tif(l!=orgl && cur!==undefined){\n\t\t\t\tvar c=confirm(l+\"\\n\\nalready contains other data. Overwrite?\")\n\t\t\t\tif(!c){return false}\n\t\t\t}\n\t\t\tvar v=f.jvalue.value.split(\"\\r\").join(\"\")\n\t\t\tif(f.jtype.value==\"string\"){\n\t\t\t\tv=this.JSONstring(v)\n\t\t\t}\n\t\t\tif(l==\"json\"){\n\t\t\t\teval(\"v=\"+v)\n\t\t\t\tthis.JSONbuild(this.baseDiv,v)\n\t\t\t\tfor(var i in this.stateMem){this.openAndClose(i,true)}\n\t\t\t\tthis.setJsonMessage('Saved!')\n\t\t\t\treturn false\n\t\t\t}\n\t\t\teval(\"var json=\"+this.JSONstring(this.json))\n\t\t\tvar randi=Math.random()\n\t\t\teval(orgl+'='+randi)\n\t\t\tvar paname=this.jsonParent(orgl)\n\t\t\tvar samepa=this.jsonParent(orgl)==this.jsonParent(l)\n\t\t\teval(\"var pa=\"+paname)\n\t\t\tif(this.isArray(pa)){\t\n\t\t\t\teval(paname+'=[];var newpa='+paname)\n\t\t\t\tfor(var i=0;i<pa.length;i++){\n\t\t\t\t\tif(pa[i]!=randi){newpa[i]=pa[i]}\n\t\t\t\t}\n\t\t\t\tif(remove){\n\t\t\t\t\tvar pos=l.substring(l.lastIndexOf(\"[\")+1,l.lastIndexOf(\"]\"))/1\n\t\t\t\t\tnewpa=newpa.splice(pos,1)\n\t\t\t\t}\n\t\t\t\tif(!remove){eval(l+\"=\"+v)}\n\t\t\t}\t\t\n\t\t\telse {\n\t\t\t\teval(paname+'={};var newpa='+paname)\n\t\t\t\tfor(var i in pa){\n\t\t\t\t\tif(pa[i]!=randi){newpa[i]=pa[i]}\n\t\t\t\t\telse if(samepa && !remove){eval(l+\"=\"+v)}\n\t\t\t\t}\n\t\t\t\tif(!samepa && !remove){eval(l+\"=\"+v)}\n\t\t\t}\n\t\t\tthis.json=json\n\t\t\tvar selId=this.selectedElement?this.selectedElement.id:null\n\t\t\tthis.JSONbuild(this.baseDiv,this.json)\n\t\t\tfor(var i in this.stateMem){this.openAndClose(i,true)}\n\t\t\tthis.selectedElement=this.$(selId)\n\t\t\tif(this.selectedElement && !remove && orgl!=\"json.not1r2e3a4l\"){\n\t\t\t\tthis.selectedElement.style.fontWeight=\"bold\"\n\t\t\t}\n\t\t\tif(remove){l=\"\"}\n\t\t\tthis.setJsonMessage(remove?'Deleted!':rename?'Renamed!':'Saved!')\n\t\t\tif(!remove){this.jsonResponder(l)}\n  \t\t}\n\t\tcatch(err){\n\t\t\talert(err+\"\\n\\n\"+\"Save error!\")\n\t\t}\n\t\treturn false\n\t}\n\tJSONeditor.treeBuilder.prototype.JSONbuild=function(divName,x,y,z){\n\t\tif(!z){\n\t\t\tthis.partMem=[]\n\t\t\tthis.JSONmem=[]\n\t\t\tthis.json=x\n\t\t\tthis.baseDiv=divName\n\t\t}\n\t\tvar t=(x && this.isArray(x))?\"array\":typeof x\n\t\ty=y===undefined?\"json\":y\n\t\tz=z||0\n\t\tthis.partMem[z]='[\"'+y+'\"]'\n\t\tif(typeof y!=\"number\" && y.replace(/\\w/g,'')===\"\"){this.partMem[z]=\".\"+y}\n\t\tif(typeof y==\"number\"){this.partMem[z]=\"[\"+y+\"]\"}\n\t\tif(z===0){this.partMem[z]=\"json\"}\n\t\tthis.partMem=this.partMem.slice(0,z+1)\n\t\tvar x2=x\n\t\tthis.JSONmem.push({type:t,label:y,todo:this.partMem.join(\"\"),level:z+1})\n\t\tif(t==\"object\"){\n\t\t\tfor(var i in x){\n\t\t\t\tthis.JSONbuild(false,x[i],i,z+1)\n\t\t\t}\n\t\t}\n\t\tif(t==\"array\"){\n\t\t\tfor(var i=0;i<x.length;i++){\n\t\t\t\tthis.JSONbuild(false,x[i],i,z+1)\n\t\t\t}\n\t\t}\n\t\tif(divName){\n\t\t\tthis.build(divName,this.jsonResponder,this.JSONmem)\n\t\t\tif(!this.hasRunJSONbuildOnce){this.jsonResponder('json')}\n\t\t\tthis.hasRunJSONbuildOnce=true\n\t\t}\n\t}\n\tJSONeditor.treeBuilder.prototype.build=function(divName,todoFunc,data){\n\t\t//\n\t\t// divName is the id of the div we'll build the tree inside\n\t\t//\n\t\t// todoFunc - a function to call on label click with todo as parameter\n\t\t//\n\t\t// data should be an array of objects\n\t\t// each object should contain label,todo + level or id and pid (parentId)\n\t\t//\n\t\tvar self = this;\n\t\tvar d=data, n=divName, $=this.$, lastlevel=0, levelmem=[], im=this.images;\n\t\tthis.treeBaseDiv=divName\n\t\tif(!d){\n\t\t\tvar c=$(divName).childNodes;\n\t\t\tfor(var i=0;i<c.length;i++){\n\t\t\t\tif((c[i].tagName+\"\").toLowerCase()=='pre'){d=this.preParse(c[i])}\n\t\t\t};\n\t\t\tif(!d){return}\n\t\t};\n\t\t$(n).style.display=\"none\";\n\t\twhile ($(n).firstChild){$(n).removeChild($(n).firstChild)};\n\t\tfor(var i=0;i<d.length;i++){\n\t\t\tif(d[i].level && !lastlevel){lastlevel=d[i].level};\n\t\t\tif(d[i].level && d[i].level>lastlevel){levelmem.push(n);n=d[i-1].id};\n\t\t\tif(d[i].level && d[i].level>lastlevel+1){return 'Trying to jump levels!'};\n\t\t\tif(d[i].level && d[i].level<lastlevel){\n\t\t\t\tfor(var j=d[i].level;j<lastlevel;j++){n=levelmem.pop()}\n\t\t\t};\n\t\t\tif(!d[i].id){d[i].id=n+\"_\"+i};\n\t\t\tif(!d[i].pid){d[i].pid=n};\n\t\t\tlastlevel=d[i].level;\n\t\t\tvar a=document.createElement('div');\n\t\t\tvar t=document.createElement('span');\n\t\t\tt.style.verticalAlign='middle';\n\t\t\ta.style.whiteSpace='nowrap';\n\t\t\tvar t2=document.createTextNode(d[i].label);\n\t\t\tt.appendChild(t2);\n\t\t\ta.style.paddingLeft=d[i].pid==divName?'0px':im.nodeWidth+'px';\n\t\t\ta.style.cursor='pointer';\n\t\t\ta.style.display=(d[i].pid==divName)?'':'none';\n\t\t\ta.id=d[i].id;\n\t\t\ta.t=t;\n\t\t\t(function(){\n\t\t\t\tvar todo=d[i].todo;\n\t\t\t\t//var func=todoFunc;\n\t\t\t\ta.onclick=function(e){\n\t\t\t\t\tif(self.maniClick==\"giveItBack\"){return todo}\n\t\t\t\t\tif(self.selectedElement){\n\t\t\t\t\t\tself.selectedElement.style.fontWeight=\"\"\n\t\t\t\t\t}\n\t\t\t\t\tthis.style.fontWeight=\"bold\"\n\t\t\t\t\tself.selectedElement=this\n\t\t\t\t\tif(self.maniClick==\"selectIt\"){return}\n\t\t\t\t\tself.jsonResponder.call(self,todo);\n\t\t\t\t\tif (!e){e=window.event};\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\tif(e.stopPropagation){e.stopPropagation()};\n\t\t\t\t};\n\t\t\t\ta.onmouseover=function(e){\n\t\t\t\t\t//this.style.color=\"#999\"\n\t\t\t\t\tif (!e){e=window.event};\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\tif(e.stopPropagation){e.stopPropagation()};\n\t\t\t\t};\n\t\t\t\ta.onmouseout=function(e){\n\t\t\t\t\t//this.style.color=\"\"\n\t\t\t\t\tif (!e){e=window.event};\n\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\tif(e.stopPropagation){e.stopPropagation()};\n\t\t\t\t};\n\t\t\t}\n\t\t\t)();\n\t\t\t$(d[i].pid).appendChild(a);\n\t\t\tif(d[i].pid==divName && !a.previousSibling){a.first=true};\n\t\t};\n\t\t// calculate necessary element looks before initial display\n\t\tfor(var i=0;i<d.length;i++){var x=$(d[i].id);if(x && x.style.display!=\"none\"){this.setElementLook(x)}};\n\t\t$(divName).style.display=\"\";\n\t}\n\tJSONeditor.treeBuilder.prototype.setElementLook=function(m){\n\t\tvar $=this.$, im=this.images, self = this\n\t\tif(!m.inited){\n\t\t\tvar co=0\n\t\t\tfor(var j in im){\n\t\t\t\tif(!Object.prototype[j]){\n\t\t\t\t\tif(j==\"vertLine\"){break};\n\t\t\t\t\tvar img=document.createElement('img');\n\t\t\t\t\tvar k=(m.first && j.indexOf('Node')>=0)?j+'First':j;\n\t\t\t\t\timg.src=\"data:image/png;base64,\"+ $tw.wiki.getTiddlerText(im.path+(im[k]?im[k]:k+'.gif'));\n\t\t\t\t\timg.style.display=\"none\";\n\t\t\t\t\timg.style.verticalAlign=\"middle\";\n\t\t\t\t\timg.id=m.id+\"_\"+j;\n\t\t\t\t\tif(j.indexOf('folderNode')==0){\n\t\t\t\t\t\timg.onclick=function(e){\n\t\t\t\t\t\t\tself.openAndClose.call(self,this);\n\t\t\t\t\t\t\tif (!e){e=window.event};\n\t\t\t\t\t\t\te.cancelBubble = true;\n\t\t\t\t\t\t\tif(e.stopPropagation){e.stopPropagation()};\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tif(m.firstChild){m.insertBefore(img,m.childNodes[co]); co++}\n\t\t\t\t\telse {m.appendChild(img)};\n\t\t\t\t}\n\t\t\t};\n\t\t\tm.insertBefore(m.t,m.childNodes[co]);\n\t\t\tm.inited=true\n\t\t};\n\t\tvar lastChild=m.childNodes[m.childNodes.length-1];\n\t\tvar isParent=(lastChild.tagName+\"\").toLowerCase()==\"div\";\n\t\tvar isLast=!m.nextSibling;\n\t\tvar isOpen=isParent && lastChild.style.display!='none';\n\t\t$(m.id+\"_folder\").style.display=!isOpen && isParent?'':'none';\n\t\t$(m.id+\"_folderOpen\").style.display=isOpen && isParent?'':'none';\n\t\t$(m.id+\"_doc\").style.display=isParent?'none':'';\n\t\t$(m.id+\"_docNode\").style.display=isParent || isLast?'none':'';\n\t\t$(m.id+\"_docNodeLast\").style.display=isParent || !isLast?'none':'';\n\t\t$(m.id+\"_folderNode\").style.display=isOpen || !isParent || isLast?'none':'';\n\t\t$(m.id+\"_folderNodeLast\").style.display=isOpen || !isParent || !isLast?'none':'';\n\t\t$(m.id+\"_folderNodeOpen\").style.display=!isOpen || !isParent || isLast?'none':'';\n\t\t$(m.id+\"_folderNodeOpenLast\").style.display=!isOpen || !isParent || !isLast?'none':'';\n\t\tvar p=m.parentNode.nextSibling;\n\t\tif(p && p.id){\n\t\t\tvar sp=p;insideBase=false;\n\t\t\twhile(sp){if(sp==$(this.treeBaseDiv)){insideBase=true};sp=sp.parentNode}\n\t\t\tif(!insideBase){return}\n\t\t\tvar bg=\"data:image/png;base64,\"+ $tw.wiki.getTiddlerText(im.path+(im.vertLine?im.vertLine:'vertLine.gif'));\n\t\t\tm.style.backgroundImage='url('+bg+')';\n\t\t\tm.style.backgroundRepeat='repeat-y'\n\t\t};\n\t}\n\tJSONeditor.treeBuilder.prototype.openAndClose=function(x,remem){\n\t\tvar o, div=remem?this.$(x):x.parentNode;\n\t\tif(!div){return}\n\t\tif(remem){o=this.stateMem[div.id]}\n\t\telse {o=x.id.indexOf('Open')<0}\n\t\tif(remem==\"open\"){o=true}\n\t\tthis.stateMem[div.id]=o\n\t\tvar c=div.childNodes;\n\t\tfor(var i=0;i<c.length;i++){\n\t\t\tif(c[i].tagName.toLowerCase()!=\"div\"){continue};\n\t\t\tc[i].style.display=o?'':'none';\n\t\t\tif(o && !c[i].inited){this.setElementLook(c[i])}\n\t\t};\n\t\tthis.setElementLook(div)\n\t}\n\n\n\nJSONeditor.treeBuilder.prototype.JSONstring=function(arg,restore) { \n\t\treturn JSON.stringify(arg,null,this.format );\n}\n"
        },
        "$:/plugins/bj/jsoneditor/folderOpen.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderOpen.gif",
            "module-type": "library",
            "text": "R0lGODlhGAAWAMQAAP////z+/Pz69Pz+nPz6lPz2lPzyjPTyjPzqhPzmhPTmfPzefPzWhPzWbMzKzPzGXOTCTOS+VNy+bOy6RMy+XNS6POSyRMyiJMSeHMSaHLyaLMSWHJx6HKRyDP4BAgAAACH5BAEAAB4ALAAAAAAYABYAAAV7ICCOZGmeaKqubHte8OWWchAA2SzmQz/gmWBwlTEYjzabIMNRZRAQoVTaSWUYGElyG0gEqqhM4+krDx4F8CljuQwIBji8UIhQ1KbMpTJA+P9+E3h5GQoECguIigsXgyUbGwcNk5SUGo6PkJqbG00sHKChojqkpaanqKghADs="
        },
        "$:/plugins/bj/jsoneditor/folderNodeFirst.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeFirst.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWAPcLAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAsALAAAAAAQABYAAAhLABcIHEiwoMGDCBMqXMiwIICHECEeBDCxosB/Ayka1LgAo0COBCn+GzlyAcWTGQd6NGmxY8qNLUNGjNiwJsiaDW/iXKhzZ8KeCwICADs="
        },
        "$:/plugins/bj/jsoneditor/folderNodeOpenFirst.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeOpenFirst.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWAPcLAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAsALAAAAAAQABYAAAhBABcIHEiwoMGDCBMqXMiwIICHECEeBDCxokGKFy06XPCvY8cFFEMOxLgxo8mSKAlGXNmwJcmWLmHKfClzIc2BAQEAOw=="
        },
        "$:/plugins/bj/jsoneditor/folderNodeOpenLast.gif": {
            "type": "image/png",
            "title": "$:/plugins/bj/jsoneditor/folderNodeOpenLast.gif",
            "module-type": "library",
            "text": "R0lGODlhEAAWALMAAICAgP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///yH5BAEAAAEALAAAAAAQABYAAAQqMMhJq5Xg6n0z/xUgjmNnWl54qmggvG+QzVNK2fV66zVJgsCgcEgsGjURADs="
        },
        "$:/plugins/bj/jsoneditor/options.json": {
            "title": "$:/plugins/bj/jsoneditor/options.json",
            "type": "application/json",
            "text": "{\n\"onkeyupdate\":\"no\",\n\"format\":2\n}\n"
        }
    }
}